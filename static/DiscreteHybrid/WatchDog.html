  
<!doctype html>
<head>
  <title>OMWEBbook</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../jquery.min1.10.2.js"></script>
  <script src='../dygraph-combined.js'></script>
  <link rel="stylesheet" href="../bootstrap.min.css">
  <script src="../bootstrap.min.js"></script>
  <link rel="stylesheet" href="../codemirror.css">
 <script src="../codemirror.js"></script>
 <script src="../modelica.js"></script>
 <link rel="stylesheet" href="../custom.css">
  <script src="../autorefresh.js"></script>
  <script src="../evalnotebook.js"></script>
</head>


<body>
<div class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">OMWebBook</a>
    </div>
     <button id="evaluate" type="button" class="btn btn-success navbar-btn">Evaluate Cell</button>
    <button id="evaluateall" type="button" class="btn btn-success navbar-btn">Eval All</button>
    <img id="progressbar" src="../ajax-loader.gif" class="img-rounded" alt="Cinque Terre">
  </div>
</div>
<div class="container">
<br> <br> <br>

<h1>
WatchDog System
</h1>
<h2>
1
Event Generator Model
</h2>
<textarea id=check0textarea>
connector eventPort
  discrete Boolean signal;
end eventPort;
</textarea>  <div id=check0div> </div> <br>
<textarea id=check1textarea>
model EventGenerator
   parameter Real eventTime = 1;
   eventPort dOutput;
equation
   dOutput.signal = time > eventTime;
end EventGenerator;
</textarea>  <div id=check1div> </div> <br>
<textarea id=check2textarea>
connector EventPortInput = input Boolean;
</textarea>  <div id=check2div> </div> <br>
<textarea id=check3textarea>
connector EventPortOutput = output Boolean;
</textarea>  <div id=check3div> </div> <br>
<textarea id=check4textarea>
model EventGenerator
  parameter Real eventTime=1;
  EventPortOutput dOutput;
equation
  dOutput = time>eventTime;
end EventGenerator;
</textarea>  <div id=check4div> </div> <br>
<h2>
2
WatchDog 1
</h2>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;">The watchdog system shown in Figure 1 consists of the watchdog itself and three event generators, emitting On events, Off events and deadlineSignal events.</span></p><br>
<h1>
<p align="justify" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">WatchDog System</span></p>
</h1>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;"><br/>A Modelica model of the watchdog system follows below, consisting of the watchdog itself and the three event generators. The watchdog is formulated using an algorithm section since otherwise the multiple </span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">when</span><span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;">-equations would cause multiple assignments to be reported for the variable </span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">watchdogActive.<br/><br/></span><span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;">This version of the WatchDog receives three events: two commands to switch the watchdog on and off, and a "deadline" event. The watchdog must emit an "alarm" whenewer the deadline occurs when the watchdog is on. Initially it is turned of.<br/>This is the algorithmic implementation.</span></p><br>
<textarea id=check5textarea>
model WatchDogSystem
   EventGenerator turnOff(eventTime=0.25);
   EventGenerator turnOn(eventTime=1);
   EventGenerator deadlineEmitter(eventTime=1.5);
   WatchDog watchdog;
equation
   connect(turnOn.dOutput, watchdog.dOn);
   connect(turnOff.dOutput, watchdog.dOff);
   connect(deadlineEmitter.dOutput, watchdog.dDeadline);
end WatchDogSystem;
</textarea>  <div id=check5div> </div> <br>
<textarea id=check6textarea>
model WatchDog
   EventPortInput dOn;
   EventPortInput dOff;
   EventPortInput dDeadline;
   EventPortOutput dAlarm;
   Boolean watchdogActive(start=false); // Initially turned off
algorithm
   when dOn then // Event watchdog on
     watchdogActive := true;
   end when;
   when dOff then // Event watchdog off
     watchdogActive := false;
     dAlarm := false;
   end when;
   when dDeadline and watchdogActive then // Event Alarm!
     dAlarm := true;
   end when;
end WatchDog;
</textarea>  <div id=check6div> </div> <br>
<h2>
3
Simulation of WatchDogSystem
</h2>
<textarea id=check7textarea>
simulate( WatchDogSystem, stopTime=2 ) 
</textarea>  <div id=check7div> </div> <br>
<textarea id=check8textarea>
plot( watchdog.dAlarm)
</textarea> <br> <div id=check8div> </div> <br>
<script type="text/javascript">
g = new Dygraph(document.getElementById("check8div"),
  [[ 0.   ,  0.   ],
       [ 0.004,  0.   ],
       [ 0.008,  0.   ],
       [ 0.012,  0.   ],
       [ 0.016,  0.   ],
       [ 0.02 ,  0.   ],
       [ 0.024,  0.   ],
       [ 0.028,  0.   ],
       [ 0.032,  0.   ],
       [ 0.036,  0.   ],
       [ 0.04 ,  0.   ],
       [ 0.044,  0.   ],
       [ 0.048,  0.   ],
       [ 0.052,  0.   ],
       [ 0.056,  0.   ],
       [ 0.06 ,  0.   ],
       [ 0.064,  0.   ],
       [ 0.068,  0.   ],
       [ 0.072,  0.   ],
       [ 0.076,  0.   ],
       [ 0.08 ,  0.   ],
       [ 0.084,  0.   ],
       [ 0.088,  0.   ],
       [ 0.092,  0.   ],
       [ 0.096,  0.   ],
       [ 0.1  ,  0.   ],
       [ 0.104,  0.   ],
       [ 0.108,  0.   ],
       [ 0.112,  0.   ],
       [ 0.116,  0.   ],
       [ 0.12 ,  0.   ],
       [ 0.124,  0.   ],
       [ 0.128,  0.   ],
       [ 0.132,  0.   ],
       [ 0.136,  0.   ],
       [ 0.14 ,  0.   ],
       [ 0.144,  0.   ],
       [ 0.148,  0.   ],
       [ 0.152,  0.   ],
       [ 0.156,  0.   ],
       [ 0.16 ,  0.   ],
       [ 0.164,  0.   ],
       [ 0.168,  0.   ],
       [ 0.172,  0.   ],
       [ 0.176,  0.   ],
       [ 0.18 ,  0.   ],
       [ 0.184,  0.   ],
       [ 0.188,  0.   ],
       [ 0.192,  0.   ],
       [ 0.196,  0.   ],
       [ 0.2  ,  0.   ],
       [ 0.204,  0.   ],
       [ 0.208,  0.   ],
       [ 0.212,  0.   ],
       [ 0.216,  0.   ],
       [ 0.22 ,  0.   ],
       [ 0.224,  0.   ],
       [ 0.228,  0.   ],
       [ 0.232,  0.   ],
       [ 0.236,  0.   ],
       [ 0.24 ,  0.   ],
       [ 0.244,  0.   ],
       [ 0.248,  0.   ],
       [ 0.25 ,  0.   ],
       [ 0.25 ,  0.   ],
       [ 0.252,  0.   ],
       [ 0.256,  0.   ],
       [ 0.26 ,  0.   ],
       [ 0.264,  0.   ],
       [ 0.268,  0.   ],
       [ 0.272,  0.   ],
       [ 0.276,  0.   ],
       [ 0.28 ,  0.   ],
       [ 0.284,  0.   ],
       [ 0.288,  0.   ],
       [ 0.292,  0.   ],
       [ 0.296,  0.   ],
       [ 0.3  ,  0.   ],
       [ 0.304,  0.   ],
       [ 0.308,  0.   ],
       [ 0.312,  0.   ],
       [ 0.316,  0.   ],
       [ 0.32 ,  0.   ],
       [ 0.324,  0.   ],
       [ 0.328,  0.   ],
       [ 0.332,  0.   ],
       [ 0.336,  0.   ],
       [ 0.34 ,  0.   ],
       [ 0.344,  0.   ],
       [ 0.348,  0.   ],
       [ 0.352,  0.   ],
       [ 0.356,  0.   ],
       [ 0.36 ,  0.   ],
       [ 0.364,  0.   ],
       [ 0.368,  0.   ],
       [ 0.372,  0.   ],
       [ 0.376,  0.   ],
       [ 0.38 ,  0.   ],
       [ 0.384,  0.   ],
       [ 0.388,  0.   ],
       [ 0.392,  0.   ],
       [ 0.396,  0.   ],
       [ 0.4  ,  0.   ],
       [ 0.404,  0.   ],
       [ 0.408,  0.   ],
       [ 0.412,  0.   ],
       [ 0.416,  0.   ],
       [ 0.42 ,  0.   ],
       [ 0.424,  0.   ],
       [ 0.428,  0.   ],
       [ 0.432,  0.   ],
       [ 0.436,  0.   ],
       [ 0.44 ,  0.   ],
       [ 0.444,  0.   ],
       [ 0.448,  0.   ],
       [ 0.452,  0.   ],
       [ 0.456,  0.   ],
       [ 0.46 ,  0.   ],
       [ 0.464,  0.   ],
       [ 0.468,  0.   ],
       [ 0.472,  0.   ],
       [ 0.476,  0.   ],
       [ 0.48 ,  0.   ],
       [ 0.484,  0.   ],
       [ 0.488,  0.   ],
       [ 0.492,  0.   ],
       [ 0.496,  0.   ],
       [ 0.5  ,  0.   ],
       [ 0.504,  0.   ],
       [ 0.508,  0.   ],
       [ 0.512,  0.   ],
       [ 0.516,  0.   ],
       [ 0.52 ,  0.   ],
       [ 0.524,  0.   ],
       [ 0.528,  0.   ],
       [ 0.532,  0.   ],
       [ 0.536,  0.   ],
       [ 0.54 ,  0.   ],
       [ 0.544,  0.   ],
       [ 0.548,  0.   ],
       [ 0.552,  0.   ],
       [ 0.556,  0.   ],
       [ 0.56 ,  0.   ],
       [ 0.564,  0.   ],
       [ 0.568,  0.   ],
       [ 0.572,  0.   ],
       [ 0.576,  0.   ],
       [ 0.58 ,  0.   ],
       [ 0.584,  0.   ],
       [ 0.588,  0.   ],
       [ 0.592,  0.   ],
       [ 0.596,  0.   ],
       [ 0.6  ,  0.   ],
       [ 0.604,  0.   ],
       [ 0.608,  0.   ],
       [ 0.612,  0.   ],
       [ 0.616,  0.   ],
       [ 0.62 ,  0.   ],
       [ 0.624,  0.   ],
       [ 0.628,  0.   ],
       [ 0.632,  0.   ],
       [ 0.636,  0.   ],
       [ 0.64 ,  0.   ],
       [ 0.644,  0.   ],
       [ 0.648,  0.   ],
       [ 0.652,  0.   ],
       [ 0.656,  0.   ],
       [ 0.66 ,  0.   ],
       [ 0.664,  0.   ],
       [ 0.668,  0.   ],
       [ 0.672,  0.   ],
       [ 0.676,  0.   ],
       [ 0.68 ,  0.   ],
       [ 0.684,  0.   ],
       [ 0.688,  0.   ],
       [ 0.692,  0.   ],
       [ 0.696,  0.   ],
       [ 0.7  ,  0.   ],
       [ 0.704,  0.   ],
       [ 0.708,  0.   ],
       [ 0.712,  0.   ],
       [ 0.716,  0.   ],
       [ 0.72 ,  0.   ],
       [ 0.724,  0.   ],
       [ 0.728,  0.   ],
       [ 0.732,  0.   ],
       [ 0.736,  0.   ],
       [ 0.74 ,  0.   ],
       [ 0.744,  0.   ],
       [ 0.748,  0.   ],
       [ 0.752,  0.   ],
       [ 0.756,  0.   ],
       [ 0.76 ,  0.   ],
       [ 0.764,  0.   ],
       [ 0.768,  0.   ],
       [ 0.772,  0.   ],
       [ 0.776,  0.   ],
       [ 0.78 ,  0.   ],
       [ 0.784,  0.   ],
       [ 0.788,  0.   ],
       [ 0.792,  0.   ],
       [ 0.796,  0.   ],
       [ 0.8  ,  0.   ],
       [ 0.804,  0.   ],
       [ 0.808,  0.   ],
       [ 0.812,  0.   ],
       [ 0.816,  0.   ],
       [ 0.82 ,  0.   ],
       [ 0.824,  0.   ],
       [ 0.828,  0.   ],
       [ 0.832,  0.   ],
       [ 0.836,  0.   ],
       [ 0.84 ,  0.   ],
       [ 0.844,  0.   ],
       [ 0.848,  0.   ],
       [ 0.852,  0.   ],
       [ 0.856,  0.   ],
       [ 0.86 ,  0.   ],
       [ 0.864,  0.   ],
       [ 0.868,  0.   ],
       [ 0.872,  0.   ],
       [ 0.876,  0.   ],
       [ 0.88 ,  0.   ],
       [ 0.884,  0.   ],
       [ 0.888,  0.   ],
       [ 0.892,  0.   ],
       [ 0.896,  0.   ],
       [ 0.9  ,  0.   ],
       [ 0.904,  0.   ],
       [ 0.908,  0.   ],
       [ 0.912,  0.   ],
       [ 0.916,  0.   ],
       [ 0.92 ,  0.   ],
       [ 0.924,  0.   ],
       [ 0.928,  0.   ],
       [ 0.932,  0.   ],
       [ 0.936,  0.   ],
       [ 0.94 ,  0.   ],
       [ 0.944,  0.   ],
       [ 0.948,  0.   ],
       [ 0.952,  0.   ],
       [ 0.956,  0.   ],
       [ 0.96 ,  0.   ],
       [ 0.964,  0.   ],
       [ 0.968,  0.   ],
       [ 0.972,  0.   ],
       [ 0.976,  0.   ],
       [ 0.98 ,  0.   ],
       [ 0.984,  0.   ],
       [ 0.988,  0.   ],
       [ 0.992,  0.   ],
       [ 0.996,  0.   ],
       [ 1.   ,  0.   ],
       [ 1.   ,  0.   ],
       [ 1.   ,  0.   ],
       [ 1.004,  0.   ],
       [ 1.008,  0.   ],
       [ 1.012,  0.   ],
       [ 1.016,  0.   ],
       [ 1.02 ,  0.   ],
       [ 1.024,  0.   ],
       [ 1.028,  0.   ],
       [ 1.032,  0.   ],
       [ 1.036,  0.   ],
       [ 1.04 ,  0.   ],
       [ 1.044,  0.   ],
       [ 1.048,  0.   ],
       [ 1.052,  0.   ],
       [ 1.056,  0.   ],
       [ 1.06 ,  0.   ],
       [ 1.064,  0.   ],
       [ 1.068,  0.   ],
       [ 1.072,  0.   ],
       [ 1.076,  0.   ],
       [ 1.08 ,  0.   ],
       [ 1.084,  0.   ],
       [ 1.088,  0.   ],
       [ 1.092,  0.   ],
       [ 1.096,  0.   ],
       [ 1.1  ,  0.   ],
       [ 1.104,  0.   ],
       [ 1.108,  0.   ],
       [ 1.112,  0.   ],
       [ 1.116,  0.   ],
       [ 1.12 ,  0.   ],
       [ 1.124,  0.   ],
       [ 1.128,  0.   ],
       [ 1.132,  0.   ],
       [ 1.136,  0.   ],
       [ 1.14 ,  0.   ],
       [ 1.144,  0.   ],
       [ 1.148,  0.   ],
       [ 1.152,  0.   ],
       [ 1.156,  0.   ],
       [ 1.16 ,  0.   ],
       [ 1.164,  0.   ],
       [ 1.168,  0.   ],
       [ 1.172,  0.   ],
       [ 1.176,  0.   ],
       [ 1.18 ,  0.   ],
       [ 1.184,  0.   ],
       [ 1.188,  0.   ],
       [ 1.192,  0.   ],
       [ 1.196,  0.   ],
       [ 1.2  ,  0.   ],
       [ 1.204,  0.   ],
       [ 1.208,  0.   ],
       [ 1.212,  0.   ],
       [ 1.216,  0.   ],
       [ 1.22 ,  0.   ],
       [ 1.224,  0.   ],
       [ 1.228,  0.   ],
       [ 1.232,  0.   ],
       [ 1.236,  0.   ],
       [ 1.24 ,  0.   ],
       [ 1.244,  0.   ],
       [ 1.248,  0.   ],
       [ 1.252,  0.   ],
       [ 1.256,  0.   ],
       [ 1.26 ,  0.   ],
       [ 1.264,  0.   ],
       [ 1.268,  0.   ],
       [ 1.272,  0.   ],
       [ 1.276,  0.   ],
       [ 1.28 ,  0.   ],
       [ 1.284,  0.   ],
       [ 1.288,  0.   ],
       [ 1.292,  0.   ],
       [ 1.296,  0.   ],
       [ 1.3  ,  0.   ],
       [ 1.304,  0.   ],
       [ 1.308,  0.   ],
       [ 1.312,  0.   ],
       [ 1.316,  0.   ],
       [ 1.32 ,  0.   ],
       [ 1.324,  0.   ],
       [ 1.328,  0.   ],
       [ 1.332,  0.   ],
       [ 1.336,  0.   ],
       [ 1.34 ,  0.   ],
       [ 1.344,  0.   ],
       [ 1.348,  0.   ],
       [ 1.352,  0.   ],
       [ 1.356,  0.   ],
       [ 1.36 ,  0.   ],
       [ 1.364,  0.   ],
       [ 1.368,  0.   ],
       [ 1.372,  0.   ],
       [ 1.376,  0.   ],
       [ 1.38 ,  0.   ],
       [ 1.384,  0.   ],
       [ 1.388,  0.   ],
       [ 1.392,  0.   ],
       [ 1.396,  0.   ],
       [ 1.4  ,  0.   ],
       [ 1.404,  0.   ],
       [ 1.408,  0.   ],
       [ 1.412,  0.   ],
       [ 1.416,  0.   ],
       [ 1.42 ,  0.   ],
       [ 1.424,  0.   ],
       [ 1.428,  0.   ],
       [ 1.432,  0.   ],
       [ 1.436,  0.   ],
       [ 1.44 ,  0.   ],
       [ 1.444,  0.   ],
       [ 1.448,  0.   ],
       [ 1.452,  0.   ],
       [ 1.456,  0.   ],
       [ 1.46 ,  0.   ],
       [ 1.464,  0.   ],
       [ 1.468,  0.   ],
       [ 1.472,  0.   ],
       [ 1.476,  0.   ],
       [ 1.48 ,  0.   ],
       [ 1.484,  0.   ],
       [ 1.488,  0.   ],
       [ 1.492,  0.   ],
       [ 1.496,  0.   ],
       [ 1.5  ,  0.   ],
       [ 1.5  ,  0.   ],
       [ 1.5  ,  1.   ],
       [ 1.504,  1.   ],
       [ 1.508,  1.   ],
       [ 1.512,  1.   ],
       [ 1.516,  1.   ],
       [ 1.52 ,  1.   ],
       [ 1.524,  1.   ],
       [ 1.528,  1.   ],
       [ 1.532,  1.   ],
       [ 1.536,  1.   ],
       [ 1.54 ,  1.   ],
       [ 1.544,  1.   ],
       [ 1.548,  1.   ],
       [ 1.552,  1.   ],
       [ 1.556,  1.   ],
       [ 1.56 ,  1.   ],
       [ 1.564,  1.   ],
       [ 1.568,  1.   ],
       [ 1.572,  1.   ],
       [ 1.576,  1.   ],
       [ 1.58 ,  1.   ],
       [ 1.584,  1.   ],
       [ 1.588,  1.   ],
       [ 1.592,  1.   ],
       [ 1.596,  1.   ],
       [ 1.6  ,  1.   ],
       [ 1.604,  1.   ],
       [ 1.608,  1.   ],
       [ 1.612,  1.   ],
       [ 1.616,  1.   ],
       [ 1.62 ,  1.   ],
       [ 1.624,  1.   ],
       [ 1.628,  1.   ],
       [ 1.632,  1.   ],
       [ 1.636,  1.   ],
       [ 1.64 ,  1.   ],
       [ 1.644,  1.   ],
       [ 1.648,  1.   ],
       [ 1.652,  1.   ],
       [ 1.656,  1.   ],
       [ 1.66 ,  1.   ],
       [ 1.664,  1.   ],
       [ 1.668,  1.   ],
       [ 1.672,  1.   ],
       [ 1.676,  1.   ],
       [ 1.68 ,  1.   ],
       [ 1.684,  1.   ],
       [ 1.688,  1.   ],
       [ 1.692,  1.   ],
       [ 1.696,  1.   ],
       [ 1.7  ,  1.   ],
       [ 1.704,  1.   ],
       [ 1.708,  1.   ],
       [ 1.712,  1.   ],
       [ 1.716,  1.   ],
       [ 1.72 ,  1.   ],
       [ 1.724,  1.   ],
       [ 1.728,  1.   ],
       [ 1.732,  1.   ],
       [ 1.736,  1.   ],
       [ 1.74 ,  1.   ],
       [ 1.744,  1.   ],
       [ 1.748,  1.   ],
       [ 1.752,  1.   ],
       [ 1.756,  1.   ],
       [ 1.76 ,  1.   ],
       [ 1.764,  1.   ],
       [ 1.768,  1.   ],
       [ 1.772,  1.   ],
       [ 1.776,  1.   ],
       [ 1.78 ,  1.   ],
       [ 1.784,  1.   ],
       [ 1.788,  1.   ],
       [ 1.792,  1.   ],
       [ 1.796,  1.   ],
       [ 1.8  ,  1.   ],
       [ 1.804,  1.   ],
       [ 1.808,  1.   ],
       [ 1.812,  1.   ],
       [ 1.816,  1.   ],
       [ 1.82 ,  1.   ],
       [ 1.824,  1.   ],
       [ 1.828,  1.   ],
       [ 1.832,  1.   ],
       [ 1.836,  1.   ],
       [ 1.84 ,  1.   ],
       [ 1.844,  1.   ],
       [ 1.848,  1.   ],
       [ 1.852,  1.   ],
       [ 1.856,  1.   ],
       [ 1.86 ,  1.   ],
       [ 1.864,  1.   ],
       [ 1.868,  1.   ],
       [ 1.872,  1.   ],
       [ 1.876,  1.   ],
       [ 1.88 ,  1.   ],
       [ 1.884,  1.   ],
       [ 1.888,  1.   ],
       [ 1.892,  1.   ],
       [ 1.896,  1.   ],
       [ 1.9  ,  1.   ],
       [ 1.904,  1.   ],
       [ 1.908,  1.   ],
       [ 1.912,  1.   ],
       [ 1.916,  1.   ],
       [ 1.92 ,  1.   ],
       [ 1.924,  1.   ],
       [ 1.928,  1.   ],
       [ 1.932,  1.   ],
       [ 1.936,  1.   ],
       [ 1.94 ,  1.   ],
       [ 1.944,  1.   ],
       [ 1.948,  1.   ],
       [ 1.952,  1.   ],
       [ 1.956,  1.   ],
       [ 1.96 ,  1.   ],
       [ 1.964,  1.   ],
       [ 1.968,  1.   ],
       [ 1.972,  1.   ],
       [ 1.976,  1.   ],
       [ 1.98 ,  1.   ],
       [ 1.984,  1.   ],
       [ 1.988,  1.   ],
       [ 1.992,  1.   ],
       [ 1.996,  1.   ],
       [ 2.   ,  1.   ],
       [ 2.   ,  1.   ]] 
,
{
legend:"always",
labels:
['Time', 'watchdog.dAlarm']
}
)
</script>
<h2>
4
WatchDog 2
</h2>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;">This version of the WatchDog receives three events: two commands to switch the watchdog on and off, and a "deadline" event. The watchdog must emit an "alarm" whenewer the deadline occurs when the watchdog is on. Initially it is turned off. This is the equation-based inplementation of the </span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">watchdog1</span><span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;">.<br/></span></p><br>
<textarea id=check9textarea>
model WatchDog2
   EventPortInput dOn;
   EventPortInput dOff;
   EventPortInput dDeadline;
   EventPortOutput dAlarm;

   Real internalTime1(fixed=true), internalTime2(fixed=true);

equation
   when change(dOn)then
     internalTime1 = time;
   end when;

   when change(dOff)then
     internalTime2 = time;
   end when;

   when change(dDeadline) and time>internalTime1 and internalTime1>internalTime2 then
     dAlarm=true;
   end when;
end WatchDog2;
</textarea>  <div id=check9div> </div> <br>
<textarea id=check10textarea>
model WatchDogSystem2
  EventGenerator  turnOn(eventTime=1);
  EventGenerator  turnOff(eventTime=0.25);
  EventGenerator  deadlineEmitter(eventTime=1.5);
  WatchDog2       watchdog;
equation
    connect(turnOn.dOutput,watchdog.dOn);
    connect(turnOff.dOutput,watchdog.dOff);
    connect(deadlineEmitter.dOutput, watchdog.dDeadline);
end WatchDogSystem2;
</textarea>  <div id=check10div> </div> <br>
<h2>
5
Simulation of WatchDogSystem2
</h2>
<textarea id=check11textarea>
simulate( WatchDogSystem2, stopTime=4 ) 
</textarea>  <div id=check11div> </div> <br>
<textarea id=check12textarea>
plot( watchdog.dAlarm)
</textarea> <br> <div id=check12div> </div> <br>
<script type="text/javascript">
g = new Dygraph(document.getElementById("check12div"),
  [[ 0.   ,  0.   ],
       [ 0.008,  0.   ],
       [ 0.016,  0.   ],
       [ 0.024,  0.   ],
       [ 0.032,  0.   ],
       [ 0.04 ,  0.   ],
       [ 0.048,  0.   ],
       [ 0.056,  0.   ],
       [ 0.064,  0.   ],
       [ 0.072,  0.   ],
       [ 0.08 ,  0.   ],
       [ 0.088,  0.   ],
       [ 0.096,  0.   ],
       [ 0.104,  0.   ],
       [ 0.112,  0.   ],
       [ 0.12 ,  0.   ],
       [ 0.128,  0.   ],
       [ 0.136,  0.   ],
       [ 0.144,  0.   ],
       [ 0.152,  0.   ],
       [ 0.16 ,  0.   ],
       [ 0.168,  0.   ],
       [ 0.176,  0.   ],
       [ 0.184,  0.   ],
       [ 0.192,  0.   ],
       [ 0.2  ,  0.   ],
       [ 0.208,  0.   ],
       [ 0.216,  0.   ],
       [ 0.224,  0.   ],
       [ 0.232,  0.   ],
       [ 0.24 ,  0.   ],
       [ 0.248,  0.   ],
       [ 0.25 ,  0.   ],
       [ 0.25 ,  0.   ],
       [ 0.256,  0.   ],
       [ 0.264,  0.   ],
       [ 0.272,  0.   ],
       [ 0.28 ,  0.   ],
       [ 0.288,  0.   ],
       [ 0.296,  0.   ],
       [ 0.304,  0.   ],
       [ 0.312,  0.   ],
       [ 0.32 ,  0.   ],
       [ 0.328,  0.   ],
       [ 0.336,  0.   ],
       [ 0.344,  0.   ],
       [ 0.352,  0.   ],
       [ 0.36 ,  0.   ],
       [ 0.368,  0.   ],
       [ 0.376,  0.   ],
       [ 0.384,  0.   ],
       [ 0.392,  0.   ],
       [ 0.4  ,  0.   ],
       [ 0.408,  0.   ],
       [ 0.416,  0.   ],
       [ 0.424,  0.   ],
       [ 0.432,  0.   ],
       [ 0.44 ,  0.   ],
       [ 0.448,  0.   ],
       [ 0.456,  0.   ],
       [ 0.464,  0.   ],
       [ 0.472,  0.   ],
       [ 0.48 ,  0.   ],
       [ 0.488,  0.   ],
       [ 0.496,  0.   ],
       [ 0.504,  0.   ],
       [ 0.512,  0.   ],
       [ 0.52 ,  0.   ],
       [ 0.528,  0.   ],
       [ 0.536,  0.   ],
       [ 0.544,  0.   ],
       [ 0.552,  0.   ],
       [ 0.56 ,  0.   ],
       [ 0.568,  0.   ],
       [ 0.576,  0.   ],
       [ 0.584,  0.   ],
       [ 0.592,  0.   ],
       [ 0.6  ,  0.   ],
       [ 0.608,  0.   ],
       [ 0.616,  0.   ],
       [ 0.624,  0.   ],
       [ 0.632,  0.   ],
       [ 0.64 ,  0.   ],
       [ 0.648,  0.   ],
       [ 0.656,  0.   ],
       [ 0.664,  0.   ],
       [ 0.672,  0.   ],
       [ 0.68 ,  0.   ],
       [ 0.688,  0.   ],
       [ 0.696,  0.   ],
       [ 0.704,  0.   ],
       [ 0.712,  0.   ],
       [ 0.72 ,  0.   ],
       [ 0.728,  0.   ],
       [ 0.736,  0.   ],
       [ 0.744,  0.   ],
       [ 0.752,  0.   ],
       [ 0.76 ,  0.   ],
       [ 0.768,  0.   ],
       [ 0.776,  0.   ],
       [ 0.784,  0.   ],
       [ 0.792,  0.   ],
       [ 0.8  ,  0.   ],
       [ 0.808,  0.   ],
       [ 0.816,  0.   ],
       [ 0.824,  0.   ],
       [ 0.832,  0.   ],
       [ 0.84 ,  0.   ],
       [ 0.848,  0.   ],
       [ 0.856,  0.   ],
       [ 0.864,  0.   ],
       [ 0.872,  0.   ],
       [ 0.88 ,  0.   ],
       [ 0.888,  0.   ],
       [ 0.896,  0.   ],
       [ 0.904,  0.   ],
       [ 0.912,  0.   ],
       [ 0.92 ,  0.   ],
       [ 0.928,  0.   ],
       [ 0.936,  0.   ],
       [ 0.944,  0.   ],
       [ 0.952,  0.   ],
       [ 0.96 ,  0.   ],
       [ 0.968,  0.   ],
       [ 0.976,  0.   ],
       [ 0.984,  0.   ],
       [ 0.992,  0.   ],
       [ 1.   ,  0.   ],
       [ 1.   ,  0.   ],
       [ 1.   ,  0.   ],
       [ 1.008,  0.   ],
       [ 1.016,  0.   ],
       [ 1.024,  0.   ],
       [ 1.032,  0.   ],
       [ 1.04 ,  0.   ],
       [ 1.048,  0.   ],
       [ 1.056,  0.   ],
       [ 1.064,  0.   ],
       [ 1.072,  0.   ],
       [ 1.08 ,  0.   ],
       [ 1.088,  0.   ],
       [ 1.096,  0.   ],
       [ 1.104,  0.   ],
       [ 1.112,  0.   ],
       [ 1.12 ,  0.   ],
       [ 1.128,  0.   ],
       [ 1.136,  0.   ],
       [ 1.144,  0.   ],
       [ 1.152,  0.   ],
       [ 1.16 ,  0.   ],
       [ 1.168,  0.   ],
       [ 1.176,  0.   ],
       [ 1.184,  0.   ],
       [ 1.192,  0.   ],
       [ 1.2  ,  0.   ],
       [ 1.208,  0.   ],
       [ 1.216,  0.   ],
       [ 1.224,  0.   ],
       [ 1.232,  0.   ],
       [ 1.24 ,  0.   ],
       [ 1.248,  0.   ],
       [ 1.256,  0.   ],
       [ 1.264,  0.   ],
       [ 1.272,  0.   ],
       [ 1.28 ,  0.   ],
       [ 1.288,  0.   ],
       [ 1.296,  0.   ],
       [ 1.304,  0.   ],
       [ 1.312,  0.   ],
       [ 1.32 ,  0.   ],
       [ 1.328,  0.   ],
       [ 1.336,  0.   ],
       [ 1.344,  0.   ],
       [ 1.352,  0.   ],
       [ 1.36 ,  0.   ],
       [ 1.368,  0.   ],
       [ 1.376,  0.   ],
       [ 1.384,  0.   ],
       [ 1.392,  0.   ],
       [ 1.4  ,  0.   ],
       [ 1.408,  0.   ],
       [ 1.416,  0.   ],
       [ 1.424,  0.   ],
       [ 1.432,  0.   ],
       [ 1.44 ,  0.   ],
       [ 1.448,  0.   ],
       [ 1.456,  0.   ],
       [ 1.464,  0.   ],
       [ 1.472,  0.   ],
       [ 1.48 ,  0.   ],
       [ 1.488,  0.   ],
       [ 1.496,  0.   ],
       [ 1.5  ,  0.   ],
       [ 1.5  ,  1.   ],
       [ 1.504,  1.   ],
       [ 1.512,  1.   ],
       [ 1.52 ,  1.   ],
       [ 1.528,  1.   ],
       [ 1.536,  1.   ],
       [ 1.544,  1.   ],
       [ 1.552,  1.   ],
       [ 1.56 ,  1.   ],
       [ 1.568,  1.   ],
       [ 1.576,  1.   ],
       [ 1.584,  1.   ],
       [ 1.592,  1.   ],
       [ 1.6  ,  1.   ],
       [ 1.608,  1.   ],
       [ 1.616,  1.   ],
       [ 1.624,  1.   ],
       [ 1.632,  1.   ],
       [ 1.64 ,  1.   ],
       [ 1.648,  1.   ],
       [ 1.656,  1.   ],
       [ 1.664,  1.   ],
       [ 1.672,  1.   ],
       [ 1.68 ,  1.   ],
       [ 1.688,  1.   ],
       [ 1.696,  1.   ],
       [ 1.704,  1.   ],
       [ 1.712,  1.   ],
       [ 1.72 ,  1.   ],
       [ 1.728,  1.   ],
       [ 1.736,  1.   ],
       [ 1.744,  1.   ],
       [ 1.752,  1.   ],
       [ 1.76 ,  1.   ],
       [ 1.768,  1.   ],
       [ 1.776,  1.   ],
       [ 1.784,  1.   ],
       [ 1.792,  1.   ],
       [ 1.8  ,  1.   ],
       [ 1.808,  1.   ],
       [ 1.816,  1.   ],
       [ 1.824,  1.   ],
       [ 1.832,  1.   ],
       [ 1.84 ,  1.   ],
       [ 1.848,  1.   ],
       [ 1.856,  1.   ],
       [ 1.864,  1.   ],
       [ 1.872,  1.   ],
       [ 1.88 ,  1.   ],
       [ 1.888,  1.   ],
       [ 1.896,  1.   ],
       [ 1.904,  1.   ],
       [ 1.912,  1.   ],
       [ 1.92 ,  1.   ],
       [ 1.928,  1.   ],
       [ 1.936,  1.   ],
       [ 1.944,  1.   ],
       [ 1.952,  1.   ],
       [ 1.96 ,  1.   ],
       [ 1.968,  1.   ],
       [ 1.976,  1.   ],
       [ 1.984,  1.   ],
       [ 1.992,  1.   ],
       [ 2.   ,  1.   ],
       [ 2.008,  1.   ],
       [ 2.016,  1.   ],
       [ 2.024,  1.   ],
       [ 2.032,  1.   ],
       [ 2.04 ,  1.   ],
       [ 2.048,  1.   ],
       [ 2.056,  1.   ],
       [ 2.064,  1.   ],
       [ 2.072,  1.   ],
       [ 2.08 ,  1.   ],
       [ 2.088,  1.   ],
       [ 2.096,  1.   ],
       [ 2.104,  1.   ],
       [ 2.112,  1.   ],
       [ 2.12 ,  1.   ],
       [ 2.128,  1.   ],
       [ 2.136,  1.   ],
       [ 2.144,  1.   ],
       [ 2.152,  1.   ],
       [ 2.16 ,  1.   ],
       [ 2.168,  1.   ],
       [ 2.176,  1.   ],
       [ 2.184,  1.   ],
       [ 2.192,  1.   ],
       [ 2.2  ,  1.   ],
       [ 2.208,  1.   ],
       [ 2.216,  1.   ],
       [ 2.224,  1.   ],
       [ 2.232,  1.   ],
       [ 2.24 ,  1.   ],
       [ 2.248,  1.   ],
       [ 2.256,  1.   ],
       [ 2.264,  1.   ],
       [ 2.272,  1.   ],
       [ 2.28 ,  1.   ],
       [ 2.288,  1.   ],
       [ 2.296,  1.   ],
       [ 2.304,  1.   ],
       [ 2.312,  1.   ],
       [ 2.32 ,  1.   ],
       [ 2.328,  1.   ],
       [ 2.336,  1.   ],
       [ 2.344,  1.   ],
       [ 2.352,  1.   ],
       [ 2.36 ,  1.   ],
       [ 2.368,  1.   ],
       [ 2.376,  1.   ],
       [ 2.384,  1.   ],
       [ 2.392,  1.   ],
       [ 2.4  ,  1.   ],
       [ 2.408,  1.   ],
       [ 2.416,  1.   ],
       [ 2.424,  1.   ],
       [ 2.432,  1.   ],
       [ 2.44 ,  1.   ],
       [ 2.448,  1.   ],
       [ 2.456,  1.   ],
       [ 2.464,  1.   ],
       [ 2.472,  1.   ],
       [ 2.48 ,  1.   ],
       [ 2.488,  1.   ],
       [ 2.496,  1.   ],
       [ 2.504,  1.   ],
       [ 2.512,  1.   ],
       [ 2.52 ,  1.   ],
       [ 2.528,  1.   ],
       [ 2.536,  1.   ],
       [ 2.544,  1.   ],
       [ 2.552,  1.   ],
       [ 2.56 ,  1.   ],
       [ 2.568,  1.   ],
       [ 2.576,  1.   ],
       [ 2.584,  1.   ],
       [ 2.592,  1.   ],
       [ 2.6  ,  1.   ],
       [ 2.608,  1.   ],
       [ 2.616,  1.   ],
       [ 2.624,  1.   ],
       [ 2.632,  1.   ],
       [ 2.64 ,  1.   ],
       [ 2.648,  1.   ],
       [ 2.656,  1.   ],
       [ 2.664,  1.   ],
       [ 2.672,  1.   ],
       [ 2.68 ,  1.   ],
       [ 2.688,  1.   ],
       [ 2.696,  1.   ],
       [ 2.704,  1.   ],
       [ 2.712,  1.   ],
       [ 2.72 ,  1.   ],
       [ 2.728,  1.   ],
       [ 2.736,  1.   ],
       [ 2.744,  1.   ],
       [ 2.752,  1.   ],
       [ 2.76 ,  1.   ],
       [ 2.768,  1.   ],
       [ 2.776,  1.   ],
       [ 2.784,  1.   ],
       [ 2.792,  1.   ],
       [ 2.8  ,  1.   ],
       [ 2.808,  1.   ],
       [ 2.816,  1.   ],
       [ 2.824,  1.   ],
       [ 2.832,  1.   ],
       [ 2.84 ,  1.   ],
       [ 2.848,  1.   ],
       [ 2.856,  1.   ],
       [ 2.864,  1.   ],
       [ 2.872,  1.   ],
       [ 2.88 ,  1.   ],
       [ 2.888,  1.   ],
       [ 2.896,  1.   ],
       [ 2.904,  1.   ],
       [ 2.912,  1.   ],
       [ 2.92 ,  1.   ],
       [ 2.928,  1.   ],
       [ 2.936,  1.   ],
       [ 2.944,  1.   ],
       [ 2.952,  1.   ],
       [ 2.96 ,  1.   ],
       [ 2.968,  1.   ],
       [ 2.976,  1.   ],
       [ 2.984,  1.   ],
       [ 2.992,  1.   ],
       [ 3.   ,  1.   ],
       [ 3.008,  1.   ],
       [ 3.016,  1.   ],
       [ 3.024,  1.   ],
       [ 3.032,  1.   ],
       [ 3.04 ,  1.   ],
       [ 3.048,  1.   ],
       [ 3.056,  1.   ],
       [ 3.064,  1.   ],
       [ 3.072,  1.   ],
       [ 3.08 ,  1.   ],
       [ 3.088,  1.   ],
       [ 3.096,  1.   ],
       [ 3.104,  1.   ],
       [ 3.112,  1.   ],
       [ 3.12 ,  1.   ],
       [ 3.128,  1.   ],
       [ 3.136,  1.   ],
       [ 3.144,  1.   ],
       [ 3.152,  1.   ],
       [ 3.16 ,  1.   ],
       [ 3.168,  1.   ],
       [ 3.176,  1.   ],
       [ 3.184,  1.   ],
       [ 3.192,  1.   ],
       [ 3.2  ,  1.   ],
       [ 3.208,  1.   ],
       [ 3.216,  1.   ],
       [ 3.224,  1.   ],
       [ 3.232,  1.   ],
       [ 3.24 ,  1.   ],
       [ 3.248,  1.   ],
       [ 3.256,  1.   ],
       [ 3.264,  1.   ],
       [ 3.272,  1.   ],
       [ 3.28 ,  1.   ],
       [ 3.288,  1.   ],
       [ 3.296,  1.   ],
       [ 3.304,  1.   ],
       [ 3.312,  1.   ],
       [ 3.32 ,  1.   ],
       [ 3.328,  1.   ],
       [ 3.336,  1.   ],
       [ 3.344,  1.   ],
       [ 3.352,  1.   ],
       [ 3.36 ,  1.   ],
       [ 3.368,  1.   ],
       [ 3.376,  1.   ],
       [ 3.384,  1.   ],
       [ 3.392,  1.   ],
       [ 3.4  ,  1.   ],
       [ 3.408,  1.   ],
       [ 3.416,  1.   ],
       [ 3.424,  1.   ],
       [ 3.432,  1.   ],
       [ 3.44 ,  1.   ],
       [ 3.448,  1.   ],
       [ 3.456,  1.   ],
       [ 3.464,  1.   ],
       [ 3.472,  1.   ],
       [ 3.48 ,  1.   ],
       [ 3.488,  1.   ],
       [ 3.496,  1.   ],
       [ 3.504,  1.   ],
       [ 3.512,  1.   ],
       [ 3.52 ,  1.   ],
       [ 3.528,  1.   ],
       [ 3.536,  1.   ],
       [ 3.544,  1.   ],
       [ 3.552,  1.   ],
       [ 3.56 ,  1.   ],
       [ 3.568,  1.   ],
       [ 3.576,  1.   ],
       [ 3.584,  1.   ],
       [ 3.592,  1.   ],
       [ 3.6  ,  1.   ],
       [ 3.608,  1.   ],
       [ 3.616,  1.   ],
       [ 3.624,  1.   ],
       [ 3.632,  1.   ],
       [ 3.64 ,  1.   ],
       [ 3.648,  1.   ],
       [ 3.656,  1.   ],
       [ 3.664,  1.   ],
       [ 3.672,  1.   ],
       [ 3.68 ,  1.   ],
       [ 3.688,  1.   ],
       [ 3.696,  1.   ],
       [ 3.704,  1.   ],
       [ 3.712,  1.   ],
       [ 3.72 ,  1.   ],
       [ 3.728,  1.   ],
       [ 3.736,  1.   ],
       [ 3.744,  1.   ],
       [ 3.752,  1.   ],
       [ 3.76 ,  1.   ],
       [ 3.768,  1.   ],
       [ 3.776,  1.   ],
       [ 3.784,  1.   ],
       [ 3.792,  1.   ],
       [ 3.8  ,  1.   ],
       [ 3.808,  1.   ],
       [ 3.816,  1.   ],
       [ 3.824,  1.   ],
       [ 3.832,  1.   ],
       [ 3.84 ,  1.   ],
       [ 3.848,  1.   ],
       [ 3.856,  1.   ],
       [ 3.864,  1.   ],
       [ 3.872,  1.   ],
       [ 3.88 ,  1.   ],
       [ 3.888,  1.   ],
       [ 3.896,  1.   ],
       [ 3.904,  1.   ],
       [ 3.912,  1.   ],
       [ 3.92 ,  1.   ],
       [ 3.928,  1.   ],
       [ 3.936,  1.   ],
       [ 3.944,  1.   ],
       [ 3.952,  1.   ],
       [ 3.96 ,  1.   ],
       [ 3.968,  1.   ],
       [ 3.976,  1.   ],
       [ 3.984,  1.   ],
       [ 3.992,  1.   ],
       [ 4.   ,  1.   ],
       [ 4.   ,  1.   ]] 
,
{
legend:"always",
labels:
['Time', 'watchdog.dAlarm']
}
)
</script>
<h2>
6
WatchDog Clocked
</h2>
<p align="justify" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times'; font-size:12pt;">A clocked version of the model called WatchDogSystemClocked, is shown below. The main difference is that a global clocked timer variable has been introduced, and that the event generator detects when to emit a clocked signal synchronized with the clock ticks of the global clock by the equation dOutput = timecmp==true and previous(timecmp)==false. An if-then-else statement is used instead of the when-statements in the unclocked version since clocked when-statements are currently not available in the Modelica language.</span></p><br>
<textarea id=check13textarea>
model WatchDogClocked "Version with equation section, if-then-else"
   EventPortInput dOn;
   EventPortInput dOff;
   EventPortInput dDeadline;
   EventPortOutput dAlarm(signal(start=false));
   Boolean watchdogActive(start=false); // Initially turned off
equation
   if dOn then // Event watchdog on
     watchdogActive =true;
     dAlarm = previous(dAlarm);
  elseif dOff then // Event watchdog off
    watchdogActive =false;
    dAlarm =false;
  elseif dDeadline and previous(watchdogActive) then //Event Alarm!
    watchdogActive = previous(watchdogActive);
    dAlarm =true;
  else
    watchdogActive = previous(watchdogActive);
    dAlarm = previous(dAlarm);
  end if;
end WatchDogClocked;
</textarea>  <div id=check13div> </div> <br>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;">This model contains clocked synchronous constructs that are not yet fully supported by OpenModelica as of October 2015, but may start working within the near future.Hence the Simulation of this models does not work</span></p><br>
<textarea id=check14textarea>
setCommandLineOptions("+std=3.3")
</textarea>  <div id=check14div> </div> <br>
<textarea id=check15textarea>
simulate(WatchDogClocked)
</textarea>  <div id=check15div> </div> <br>
</div></body></html>